\documentclass[a4paper,11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{subcaption}
\usepackage[siunitx]{circuitikz}
\usepackage{longtable}
\usepackage{titlesec}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{float}
\usepackage[margin=2cm]{geometry}
\usepackage[justification=centering]{caption}
\DeclareGraphicsExtensions{.png}

\titleformat*{\section}{\sffamily\LARGE\bfseries}
\titleformat*{\subsection}{\sffamily\Large\bfseries}
\titleformat*{\subsubsection}{\sffamily\large\bfseries}

\begin{document}
\section*{Bauelementegleichungen}
\subsection*{Diode}
\subsection*{MOSFET}
\section*{Prozessparameter}
\subsection*{Prozessverstärkungsfaktor (\textit{transconductance coefficient})}
\[
	\boxed { \quad \beta_n = k_n ~ \frac{W}{L_{eff}} \quad } \qquad \boxed { \quad \beta_p = k_p ~ \frac{W}{L_{eff}} \quad }
\]

\[
	k_n = \mu_n ~ C_{ox}' = \frac{\mu_n ~ \varepsilon_0 ~ \varepsilon_{SiO_2}}{d_{ox}} \stackrel{typ.}{=} 30 \ldots 200 ~ \frac{\mu A}{V^2}
\]

\[
	k_p = \mu_p ~ C_{ox}' = \frac{\mu_p ~ \varepsilon_0 ~ \varepsilon_{SiO_2}}{d_{ox}} \stackrel{typ.}{=} 15 \ldots 100 ~ \frac{\mu A}{V^2}
\]

\section*{Parasitäre Kapazitäten}
Mit $C_G = C_{ox}' ~ W ~ L$:

\begin{center}
\begin{tabular}{r l}
	$C_{GS} = C_G$ & Gate-Source-Kapazität \\
	$C_j = \frac{2}{3} ~ C_G$ & Drain/Source-Bulk-Sperrschichtkapazität (junction) \\
	$C_{GD} = \frac{2}{3} ~ C_G$ & Gate-Drain-Kapazität
\end{tabular}
\end{center}

\section*{Störabstände (\textit{noise margins})}
\begin{figure}[H]
\begin{center}
	\includegraphics[width=0.9\textwidth]{img/noisemargin.pdf}
\end{center}
\end{figure}

\section*{Verzögerungszeiten}
\subsection*{Laden / Entladen einer Kapazität}
\[
	i(t) = -C_L ~ \frac{\mathrm du_c(t)}{\mathrm dt}
\]

Problem: Finde $t$, stelle also um:
\[
	\mathrm dt = - \frac{C_L}{i(t)} ~ \mathrm du_c
\]

Wobei $i(t)$ durch die Gleichung des entsprechendes MOSFETs bestimmt wird, d.h. nur von $u_c$ abhängt. Die Gesamtzeit ergibt sich dann durch Integration:
\[
	t_{charge} = - \int_{U_{start}}^{U_{end}} \frac{C_L}{I_{DS}(u_c)} ~ \mathrm du_c
\]

In der Regel muss dabei eine Fallunterscheidung für die verschiedenen Betriebsbereiche des MOSFETs getroffen werden mit dazugehörigem $I_{DS}$.

Wichtig: Als Endwert sollte nicht die vollständige Umladung (also $U_{DD}$ oder $0V$) verwendet werden, da dieser Wert mathematisch nie erreicht wird.

\subsubsection*{Kapazität über NMOS entladen}

\begin{figure}[H]
\centering
\begin{subfigure}{.35\textwidth}
	\centering
	\begin{circuitikz}[european, scale=0.7]
		\draw
			(0,0) node[nigfetebulk](nmos1){}
			(nmos1.S) to node[ground]{} (0, -1)
			(nmos1.D) to ++(0, 0.5) to [short,i<=$i(t)$] ++(1.5, 0) to [C,l^=$C_L$] (1.5, -1) to node[ground]{} (1.5, -1)
			(nmos1.G) to [short, -o] ++(-1.5, 0) node[label={[font=\footnotesize]above:$U_G(t) = U_{DD}$}]{}
		;
	\end{circuitikz}
\end{subfigure}
\begin{subfigure}{.49\textwidth}
	\begin{tabular}{r l}
		\textbf{Startspannung} & $U_{start} = U_{DD}$ \\
		\textbf{Zielspannung} & $U_{end} = 0.1 ~ U_{DD}$ \\
		\textbf{Threshold-Spannung} & $U_{Tn} = 0.2 ~ U_{DD}$ \\
		\textbf{Kanallängenmodulation} & vernachlässigt, $\lambda = 0$
	\end{tabular}
\end{subfigure}
\end{figure}

Abfallzeit:
\[
	\boxed{ \quad t_{HL} \approx 4 ~ \frac{C_L}{\beta_n ~ U_{DD}} \quad }
\]

\subsubsection*{Kapazität über PMOS laden}

\begin{figure}[H]
\centering
\begin{subfigure}{.35\textwidth}
	\centering
	\begin{circuitikz}[european, scale=0.7]
		\draw
			(0,0) node[pigfetebulk, rotate=90](pmos1){}
			(pmos1.G) to [short] ++(0, -1) node[ground,label={[font=\footnotesize]left:$U_G(t) = 0V$}]{}
			(pmos1.S) to [short, -o] ++(-1, 0) node[label={[font=\footnotesize]above:$U_{DD}$}]{}
			(pmos1.D) to [short,i<=$i(t)$] ++(1, 0) to [C,l^=$C_L$] ++(0,-2.4) node[ground]{}
		;
	\end{circuitikz}
	\caption*{Beachte: $i(t) < 0$}
\end{subfigure}
\begin{subfigure}{.49\textwidth}
	\begin{tabular}{r l}
		\textbf{Startspannung} & $U_{start} = 0V$ \\
		\textbf{Zielspannung} & $U_{end} = 0.9 ~ U_{DD}$ \\
		\textbf{Threshold-Spannung} & $U_{Tp} = -0.2 ~ U_{DD}$ \\
		\textbf{Kanallängenmodulation} & vernachlässigt, $\lambda = 0$
	\end{tabular}
\end{subfigure}
\end{figure}

Anstiegszeit:
\[
	\boxed{ \quad t_{LH} \approx 4 ~ \frac{C_L}{\beta_p ~ U_{DD}} \quad }
\]

\subsubsection*{Kapazität über NMOS laden}

\begin{figure}[H]
\centering
\begin{subfigure}{.35\textwidth}
	\centering
	\begin{circuitikz}[european, scale=0.7]
		\draw
			(0,0) node[nigfetebulk, rotate=90](nmos1){}
			(nmos1.G) to [short,-o] ++(-2.5, 0) node[label={[font=\footnotesize]above:$U_G(t) = U_{DD}$}]{}
			(nmos1.D) to [short, -o] ++(-1, 0) node[label={[font=\footnotesize]above:$U_{DD}$}]{}
			(nmos1.S) to [short,i<=$i(t)$] ++(1, 0) to [C,l^=$C_L$] ++(0,-2.4) node[ground]{}
		;
	\end{circuitikz}
	\caption*{Beachte: $i(t) < 0$}
\end{subfigure}
\begin{subfigure}{.49\textwidth}
	\begin{tabular}{r l}
		\textbf{Startspannung} & $U_{start} = 0V$ \\
		\textbf{Zielspannung} & $U_{end} = 0.9 ~ (U_{DD} - U_{Tn})$ \\
		\textbf{Threshold-Spannung} & egal (immer Sättigungsbereich) \\
		\textbf{Kanallängenmodulation} & vernachlässigt, $\lambda = 0$
	\end{tabular}
\end{subfigure}
\end{figure}

Anstiegszeit:
\[
	\boxed{ \quad t_{LH} \approx 18 ~ \frac{C_L}{\beta_n ~ (U_{DD} - U_{Tn})} \quad }
\]

\subsubsection*{Über NMOS geladene Kapazität wieder mit NMOS entladen}

\begin{figure}[H]
\centering
\begin{subfigure}{.35\textwidth}
	\centering
	\begin{circuitikz}[european, scale=0.7]
		\draw
			(0,0) node[nigfetebulk](nmos1){}
			(nmos1.S) to node[ground]{} (0, -1)
			(nmos1.D) to ++(0, 0.5) to [short,i<=$i(t)$] ++(1.5, 0) to [C,l^=$C_L$] (1.5, -1) to node[ground]{} (1.5, -1)
			(nmos1.G) to [short, -o] ++(-1.5, 0) node[label={[font=\footnotesize]above:$U_G(t) = U_{DD}$}]{}
		;
	\end{circuitikz}
\end{subfigure}
\begin{subfigure}{.49\textwidth}
	\begin{tabular}{r l}
		\textbf{Startspannung} & $U_{start} = U_{DD} - U_{Tn}$ (\textbf{!!!}) \\
		\textbf{Zielspannung} & $U_{end} = 0.1 ~ (U_{DD} - U_{Tn})$ \\
		\textbf{Threshold-Spannung} & egal (immer linearer Bereich) \\
		\textbf{Kanallängenmodulation} & vernachlässigt, $\lambda = 0$
	\end{tabular}
\end{subfigure}
\end{figure}

Abfallzeit:
\[
	\boxed{ \quad t_{HL} \approx 3 ~ \frac{C_L}{\beta_n ~ (U_{DD} - U_{Tn})} \quad }
\]

\subsection*{Durchschnittliche Verzögerungszeit $t_p$}
Die Durchschnittliche Verzögerungszeit $t_p$ gibt die durchschnittliche Zeit an, die verstreicht zwischen dem Moment, an dem das Eingangssignal den Schaltpunkt $50 \% ~ U_{DD}$ erreicht und dem Moment, an dem das Ausgangssignal ebenfalls den Schaltpunkt überstreicht. Es wird zwischen Anstiegs- und Abfallzeit gemittelt, $t_p = \frac{t_{pHL} + t_{pLH}}{2}$.

Sei Eingangssignal ideal (rechteckförmig) und Umladung erfolgt linear. Dann ist $50 \% ~ U_{DD}$ schon nach der Hälfte der Anstiegs- / Abfallzeit erreicht, d.h. $t_{pHL} = \frac{1}{2} ~ t_{HL}$, $t_{pLH} = \frac{1}{2} ~ t_{LH}$. Somit:
\[
	t_p = \frac{t_{HL} + t_{LH}}{4}
\]

Für den \textbf{CMOS-Inverter} oder Schaltungen mit äquivalenten Transistoren gilt bei symmetrischer Dimensionierung ($\beta_p = \beta_n$): Die Flanken sind symmetrisch und die Verzögerungszeit ist
\[
	\boxed{ \quad t_p \approx \frac{2 ~ C_L}{\beta_n ~ U_{DD}} \quad }
\]
\end{document}